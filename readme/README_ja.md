# Check Point AI Security Dify プラグイン

**著者:** Birdlex Wu
**バージョン:** 0.0.1
**タイプ:** ツール

### 概要
このDifyプラグイン（以下「本プラグイン」）は、**Check Point Software Technologies製**のLakera Guard APIへのインターフェースを提供します。プロンプトインジェクション、有害なコンテンツ、PII（個人識別情報）漏洩など、広範な脅威からユーザー入力とモデル応答をスクリーニングすることで、AIアプリケーションを保護するように設計されています。

### 使用上の重要事項

**APIキーのセキュリティ:** Lakera Guard APIキーのセキュリティは、お客様の責任です。クライアント側のコードで公開したり、バージョン管理にコミットしたりしないでください。

**サービス免責事項:** 本プラグインはLakera Guard APIへのインターフェースです。セキュリティスクリーニングのパフォーマンス、精度、および可用性はLakeraのサービス規約に従います。本プラグインの著者は、Lakera Guard APIによって提供される結果について責任を負いません。

**ライセンス免責事項:** 本ソフトウェアは「現状有姿」で提供され、著者は、本ソフトウェアに関する商品性および特定目的への適合性の黙示の保証を含む、すべての保証を放棄します。いかなる場合も、著者は、契約、過失、その他の不法行為にかかわらず、本ソフトウェアの使用または性能に関連して、使用の喪失、データまたは利益の損失に起因する、またはそれらに関連するいかなる特別な、直接的、間接的、または結果的な損害、またはその他のいかなる損害についても責任を負いません。

### 前提条件

本プラグインを使用するには、Lakera Guard APIキーが必要です。
[Lakeraウェブサイト](https://www.lakera.ai/)で無料トライアルにサインアップし、[公式クイックスタートガイド](https://docs.lakera.ai/docs/quickstart)に従ってAPIキーを取得し、プロジェクトを設定してください。
公式ウェブサイトからAPIキーを取得できない場合は、最寄りの[Check Pointパートナー](https://partnerlocator.checkpoint.com/)にお問い合わせください。

### 主要機能

*   **包括的な脅威スクリーニング**: Lakera Guardの強力なAPIと連携し、プロンプトインジェクション、データ漏洩（PII）、ユーザー入力とAIモデル出力の両方における有害なコンテンツなど、様々なAI固有の脅威を検出してフラグを立てます。
*   **柔軟な設定**: `project_id`、`payload`（詳細な検出用）、`breakdown`（フラグ付けの決定用）、`metadata`、`dev_info`などのオプションパラメータを通じて、スクリーニング動作をカスタマイズできます。
*   **明確で実用的な出力**: 脅威が検出されたかどうかを示す`true`または`false`の分かりやすいブール値と、詳細な分析のためのLakera Guardからの完全な生のJSON応答を提供します。

### 使用方法

#### インストール
`Dify Marketplace`、`GitHub`、または`ローカル`ソースからプラグインをインストールし、APIキーを設定します。

![img1](../_assets/README_assets/installation.png)

#### Chatflowにプラグインを追加
このプラグインは、入力フローまたは出力フローのいずれかに追加して、疑わしいコンテンツを検出できます。また、`Conditional Node`を使用して判断を行う必要があります。検出結果が`true`の場合はフローを終了し、検出結果が`false`の場合はフローを続行します。

![img2](../_assets/README_assets/chatflow.png)

プラグイン設定:

![img3](../_assets/README_assets/input.png)

パラメータの説明:

*   **Project ID**: スクリーニングに使用するLakera GuardプロジェクトのID。（Lakeraポータルにログインして新しいプロジェクトを作成し、プロジェクトIDを取得します。）
*   **Include Payload**: 応答にペイロードを含める場合は`true`に設定します。
*   **Include Breakdown**: 応答にフラグ付けの決定の内訳を含める場合は`true`に設定します。
*   **Metadata**: リクエストのメタデータを含むJSON文字列。例: `'{"user_id": "123"}'`
*   **Developer Info**: 応答に開発者情報を含める場合は`true`に設定します。

出力変数:

*   **text**: `true`または`false`を返します。
*   **json**: どのポリシーがブロックしたかを判断できるように、より詳細な検出情報を返します。

入力条件フロー:

![img4](../_assets/README_assets/input_condition.png)

チャットフローデモ:
![img5](../_assets/README_assets/chat.png)
